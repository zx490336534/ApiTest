(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80c2b28c"],{"8a0e":function(t,e,r){"use strict";var a=r("e2e2"),s=r.n(a);s.a},"8adf":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),t._v(" 套件管理")]),r("el-breadcrumb-item",[t._v("新增套件")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"form-box"},[r("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"套件名称",prop:"name",required:""}},[r("el-input",{attrs:{"suffix-icon":"el-icon-menu",clearable:""},on:{focus:function(e){return t.clearValidate("name")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"选择项目",prop:"project_id",required:""}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.getInterfacesByProjectID(t.form.project_id)}},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}},t._l(t.project_names,(function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:"选择接口",prop:"include",required:""}},[r("div",{staticClass:"drag-box"},[r("div",{staticClass:"drag-box-item"},[r("div",{staticClass:"item-title"},[t._v("待选接口")]),r("draggable",{attrs:{options:t.dragOptions},model:{value:t.unselected,callback:function(e){t.unselected=e},expression:"unselected"}},[r("transition-group",{staticClass:"item-ul",attrs:{tag:"div"}},t._l(t.unselected,(function(e){return r("div",{key:e.id,staticClass:"drag-list"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t")])})),0)],1)],1),r("div",{staticClass:"drag-box-item"},[r("div",{staticClass:"item-title"},[t._v("已选接口")]),r("draggable",{attrs:{options:t.dragOptions},on:{change:function(e){return t.changeResult()}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[r("transition-group",{staticClass:"item-ul",attrs:{tag:"div"}},t._l(t.selected,(function(e){return r("div",{key:e.id,staticClass:"drag-list"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t")])})),0)],1)],1)])]),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("提交")]),r("el-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("取消")])],1)],1)],1)])])},s=[],n=r("f7f9"),i=r("8a87"),o=r.n(i),c=r("4ec3"),l={name:"baseform",data:function(){return{form:{name:"",project_id:"",include:"[]"},rules:{name:[{required:!0,message:"请输入套件名称",trigger:"blur"}],project_id:[{required:!0,message:"请选择所属项目",trigger:"blur"}]},project_names:[],dragOptions:{animation:120,scroll:!0,group:"sortlist",ghostClass:"ghost-style"},unselected:[],selected:[]}},components:{draggable:o.a},created:function(){this.getProjectNames()},methods:{onSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$message.error("参数有误"),!1;var r=e;Object(c["f"])(e.form).then((function(t){e.$message.success("新增套件成功！"),setInterval((function(){r.$router.go()}),1e3)})).catch((function(t){"object"===Object(n["a"])(t)&&t.hasOwnProperty("name")?e.$message.error("套件名称已存在"):e.$message.error("服务器错误")}))}))},clearValidate:function(t){this.$refs["form"].clearValidate(t)},resetForm:function(t){this.$refs[t].resetFields()},getProjectNames:function(){var t=this;Object(c["F"])().then((function(e){t.project_names=e.data})).catch((function(t){that.$message.error("服务器错误")}))},removeHandle:function(t){console.log(t),this.$message.success("从 ".concat(t.from.id," 移动到 ").concat(t.to.id," "))},getInterfacesByProjectID:function(t){var e=this;Object(c["B"])(t).then((function(t){e.unselected=t.data})).catch((function(t){that.$message.error("服务器错误")}))},changeResult:function(){for(var t=this.selected.length,e="[",r=0;r<t;r++)e+=r==t-1?this.selected[r].id+"]":this.selected[r].id+", ";0==t&&(e="[]"),this.form.include=e}}},u=l,d=(r("8a0e"),r("9ca4")),m=Object(d["a"])(u,a,s,!1,null,"1d6dfdb6",null);e["default"]=m.exports},e2e2:function(t,e,r){}}]);