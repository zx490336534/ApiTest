(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b95f73c"],{"09ff":function(e,t,r){"use strict";var s=r("2b96"),a=r.n(s);a.a},"2b96":function(e,t,r){},"8adf":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 套件管理")]),r("el-breadcrumb-item",[e._v("新增套件")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"form-box"},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"套件名称",prop:"name",required:""}},[r("el-input",{attrs:{"suffix-icon":"el-icon-menu",clearable:""},on:{focus:function(t){return e.clearValidate("name")}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"选择项目",prop:"project_id",required:""}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getInterfacesByProjectID(e.form.project_id)}},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}},e._l(e.project_names,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"选择接口",prop:"include",required:""}},[r("div",{staticClass:"drag-box"},[r("div",{staticClass:"drag-box-item"},[r("div",{staticClass:"item-title"},[e._v("待选接口")]),r("draggable",{attrs:{options:e.dragOptions},model:{value:e.unselected,callback:function(t){e.unselected=t},expression:"unselected"}},[r("transition-group",{staticClass:"item-ul",attrs:{tag:"div"}},e._l(e.unselected,(function(t){return r("div",{key:t.id,staticClass:"drag-list"},[e._v("\n                                        "+e._s(t.name)+"\n                                    ")])})),0)],1)],1),r("div",{staticClass:"drag-box-item"},[r("div",{staticClass:"item-title"},[e._v("已选接口")]),r("draggable",{attrs:{options:e.dragOptions},on:{change:function(t){return e.changeResult()}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[r("transition-group",{staticClass:"item-ul",attrs:{tag:"div"}},e._l(e.selected,(function(t){return r("div",{key:t.id,staticClass:"drag-list"},[e._v("\n                                        "+e._s(t.name)+"\n                                    ")])})),0)],1)],1)])]),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("取消")])],1)],1)],1)])])},a=[],n=r("09d0"),i=r("8c13"),o=r.n(i),c=r("4ec3"),l={name:"baseform",data:function(){return{form:{name:"",project_id:"",include:"[]"},rules:{name:[{required:!0,message:"请输入套件名称",trigger:"blur"}],project_id:[{required:!0,message:"请选择所属项目",trigger:"blur"}]},project_names:[],dragOptions:{animation:120,scroll:!0,group:"sortlist",ghostClass:"ghost-style"},unselected:[],selected:[]}},components:{draggable:o.a},created:function(){this.getProjectNames()},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("参数有误"),!1;var r=t;Object(c["f"])(t.form).then((function(e){t.$message.success("新增套件成功！"),setInterval((function(){r.$router.go()}),1e3)})).catch((function(e){"object"===Object(n["a"])(e)&&e.hasOwnProperty("name")?t.$message.error("套件名称已存在"):t.$message.error("服务器错误")}))}))},clearValidate:function(e){this.$refs["form"].clearValidate(e)},resetForm:function(e){this.$refs[e].resetFields()},getProjectNames:function(){var e=this;Object(c["F"])().then((function(t){e.project_names=t.data})).catch((function(e){that.$message.error("服务器错误")}))},removeHandle:function(e){console.log(e),this.$message.success("从 ".concat(e.from.id," 移动到 ").concat(e.to.id," "))},getInterfacesByProjectID:function(e){var t=this;Object(c["B"])(e).then((function(e){t.unselected=e.data})).catch((function(e){that.$message.error("服务器错误")}))},changeResult:function(){for(var e=this.selected.length,t="[",r=0;r<e;r++)t+=r==e-1?this.selected[r].id+"]":this.selected[r].id+", ";0==e&&(t="[]"),this.form.include=t}}},u=l,d=(r("09ff"),r("4e82")),m=Object(d["a"])(u,s,a,!1,null,"98aa6332",null);t["default"]=m.exports}}]);